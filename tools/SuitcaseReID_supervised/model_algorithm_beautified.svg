<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="1500" height="700" viewBox="0 0 1500 700" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <!-- Gradients -->
        <linearGradient id="featureExtractGradient" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" style="stop-color:#e6f7ff;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#bae7ff;stop-opacity:1" />
        </linearGradient>
        <linearGradient id="embeddingGradient" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" style="stop-color:#f0f5ff;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#d6e4ff;stop-opacity:1" />
        </linearGradient>
        <linearGradient id="classHeadGradient" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" style="stop-color:#f9f0ff;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#efdbff;stop-opacity:1" />
        </linearGradient>
        <linearGradient id="contrastHeadGradient" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" style="stop-color:#fff2e8;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#ffe7ba;stop-opacity:1" />
        </linearGradient>
        <linearGradient id="featureVectorGradient" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" style="stop-color:#f6ffed;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#d9f7be;stop-opacity:1" />
        </linearGradient>
        
        <!-- Filters -->
        <filter id="shadow" x="-10%" y="-10%" width="120%" height="120%">
            <feDropShadow dx="3" dy="3" stdDeviation="3" flood-opacity="0.3"/>
        </filter>
        <filter id="glowEffect">
            <feGaussianBlur stdDeviation="3" result="blur" />
            <feComposite in="SourceGraphic" in2="blur" operator="over" />
        </filter>
    </defs>
    
    <!-- Background -->
    <rect width="1500" height="700" fill="#fcfcfc" rx="15" ry="15"/>
    <text x="750" y="50" font-family="Arial" font-size="32" font-weight="bold" text-anchor="middle" fill="#262626">SuitcaseReID 模型架构</text>
    
    <!-- Feature Extraction Network Section -->
    <rect x="50" y="100" width="1100" height="180" fill="url(#featureExtractGradient)" stroke="#1890ff" stroke-width="2" rx="10" ry="10" filter="url(#shadow)"/>
    <text x="600" y="130" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle" fill="#1890ff">特征提取网络</text>
    
    <!-- ResNet50 -->
    <rect x="100" y="160" width="250" height="100" fill="white" stroke="#1890ff" stroke-width="2" rx="5" ry="5" filter="url(#shadow)"/>
    <text x="225" y="210" font-family="Arial" font-size="22" font-weight="bold" text-anchor="middle" fill="#262626">ResNet50</text>
    
    <!-- Arrow -->
    <line x1="350" y1="210" x2="390" y2="210" stroke="#1890ff" stroke-width="3" stroke-linecap="round"/>
    <polygon points="390,210 380,205 380,215" fill="#1890ff"/>
    
    <!-- GeM Pooling -->
    <rect x="400" y="160" width="250" height="100" fill="white" stroke="#1890ff" stroke-width="2" rx="5" ry="5" filter="url(#shadow)"/>
    <text x="525" y="210" font-family="Arial" font-size="22" font-weight="bold" text-anchor="middle" fill="#262626">GeM Pooling</text>
    
    <!-- Arrow -->
    <line x1="650" y1="210" x2="690" y2="210" stroke="#1890ff" stroke-width="3" stroke-linecap="round"/>
    <polygon points="690,210 680,205 680,215" fill="#1890ff"/>
    
    <!-- Embedding Layer -->
    <rect x="700" y="160" width="400" height="100" fill="url(#embeddingGradient)" stroke="#722ed1" stroke-width="2" rx="5" ry="5" filter="url(#shadow)"/>
    <text x="900" y="210" font-family="Arial" font-size="22" font-weight="bold" text-anchor="middle" fill="#262626">嵌入层</text>
    
    <!-- Feature Vector Section -->
    <rect x="1200" y="100" width="120" height="180" fill="url(#featureVectorGradient)" stroke="#52c41a" stroke-width="2" rx="10" ry="10" filter="url(#shadow)"/>
    <text x="1260" y="190" font-family="Arial" font-size="20" font-weight="bold" text-anchor="middle" fill="#52c41a">特征向量</text>
    
    <!-- Arrow from Embedding to Feature Vector -->
    <line x1="1100" y1="210" x2="1200" y2="210" stroke="#52c41a" stroke-width="3" stroke-linecap="round" stroke-dasharray="5,3"/>
    <polygon points="1200,210 1190,205 1190,215" fill="#52c41a"/>
    
    <!-- Classification Head -->
    <rect x="900" y="400" width="300" height="120" fill="url(#classHeadGradient)" stroke="#722ed1" stroke-width="2" rx="10" ry="10" filter="url(#shadow)"/>
    <text x="1050" y="460" font-family="Arial" font-size="22" font-weight="bold" text-anchor="middle" fill="#722ed1">分类头</text>
    
    <!-- Contrast Learning Head -->
    <rect x="1220" y="400" width="300" height="120" fill="url(#contrastHeadGradient)" stroke="#fa8c16" stroke-width="2" rx="10" ry="10" filter="url(#shadow)"/>
    <text x="1370" y="460" font-family="Arial" font-size="22" font-weight="bold" text-anchor="middle" fill="#fa8c16">对比学习头</text>
    
    <!-- Connections from Feature Vector to Heads -->
    <!-- Connection to Classification Head -->
    <path d="M1260,280 L1260,320 L1050,320 L1050,400" 
          stroke="#722ed1" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" 
          fill="none" stroke-dasharray="7,3"/>
    <polygon points="1050,400 1045,390 1055,390" fill="#722ed1"/>
    
    <!-- Connection to Contrast Learning Head -->
    <path d="M1260,280 L1260,320 L1370,320 L1370,400" 
          stroke="#fa8c16" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" 
          fill="none" stroke-dasharray="7,3"/>
    <polygon points="1370,400 1365,390 1375,390" fill="#fa8c16"/>
    
    <!-- Flow Labels -->
    <text x="1170" y="310" font-family="Arial" font-size="16" font-style="italic" text-anchor="middle" fill="#595959">特征流向</text>
    
    <!-- Training Loss Section -->
    <rect x="780" y="550" width="800" height="80" fill="#f0f2f5" stroke="#8c8c8c" stroke-width="2" rx="10" ry="10"/>
    <text x="1080" y="590" font-family="Arial" font-size="20" font-weight="bold" text-anchor="middle" fill="#262626">模型训练目标: L_total = L_id + λL_triplet</text>
    
    <!-- Arrows from Heads to Training Loss -->
    <line x1="1050" y1="520" x2="1050" y2="550" stroke="#722ed1" stroke-width="2" stroke-linecap="round"/>
    <polygon points="1050,550 1045,540 1055,540" fill="#722ed1"/>
    
    <line x1="1370" y1="520" x2="1370" y2="550" stroke="#fa8c16" stroke-width="2" stroke-linecap="round"/>
    <polygon points="1370,550 1365,540 1375,540" fill="#fa8c16"/>
    
    <!-- Data Flow from the left -->
    <path d="M20,210 L100,210" 
          stroke="#1890ff" stroke-width="3" stroke-linecap="round" 
          fill="none" marker-end="url(#arrowhead)"/>
    
    <text x="60" y="190" font-family="Arial" font-size="16" text-anchor="middle" fill="#595959">输入图像</text>
    
    <!-- Legend -->
    <rect x="70" y="620" width="600" height="60" fill="white" stroke="#d9d9d9" stroke-width="1" rx="5" ry="5"/>
    <text x="100" y="650" font-family="Arial" font-size="16" text-anchor="start" fill="#1890ff">■</text>
    <text x="120" y="650" font-family="Arial" font-size="14" text-anchor="start" fill="#595959">特征提取</text>
    <text x="220" y="650" font-family="Arial" font-size="16" text-anchor="start" fill="#722ed1">■</text>
    <text x="240" y="650" font-family="Arial" font-size="14" text-anchor="start" fill="#595959">分类损失</text>
    <text x="340" y="650" font-family="Arial" font-size="16" text-anchor="start" fill="#fa8c16">■</text>
    <text x="360" y="650" font-family="Arial" font-size="14" text-anchor="start" fill="#595959">对比学习损失</text>
    <text x="480" y="650" font-family="Arial" font-size="16" text-anchor="start" fill="#52c41a">■</text>
    <text x="500" y="650" font-family="Arial" font-size="14" text-anchor="start" fill="#595959">特征表示</text>
    
    <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#1890ff"/>
        </marker>
    </defs>
</svg>
